Token: events$
Token: {$
Token: prueba$
Token: 2$
Token: ;$
Token: }$
Token: http$
Token: {$
Token: types$
Token: {$
Token: text/html$
Token: html$
Token: htm$
Token: shtml$
Token: ;$
Token: text/css$
Token: css$
Token: ;$
Token: text/xml$
Token: xml$
Token: ;$
Token: }$
Token: server$
Token: {$
Token: server_name$
Token: pfuentes.42$
Token: ;$
Token: listen$
Token: 127$
Token: ;$
Token: location$
Token: /about.html$
Token: {$
Token: alias$
Token: /documents/tour.html$
Token: ;$
Token: }$
Token: location$
Token: /del_prueba$
Token: {$
Token: root$
Token: hola$
Token: ;$
Token: }$
Token: location$
Token: /$
Token: {$
Token: alias$
Token: /about.html$
Token: ;$
Token: }$
Token: location$
Token: /prueba$
Token: {$
Token: root$
Token: /documents/$
Token: ;$
Token: }$
Token: }$
Token: server$
Token: {$
Token: server_name$
Token: serbre$
Token: ;$
Token: listen$
Token: 8080$
Token: ;$
Token: error_page$
Token: 502$
Token: 503$
Token: 504$
Token: /50x.html$
Token: ;$
Token: error_page$
Token: 500$
Token: /50x.html$
Token: ;$
Token: location$
Token: /manuel$
Token: {$
Token: alias$
Token: /documents/$
Token: ;$
Token: }$
Token: location$
Token: /$
Token: {$
Token: alias$
Token: /documents/$
Token: ;$
Token: methods$
Token: POST$
Token: ;$
Token: postdir$
Token: /postfiles/$
Token: ;$
Token: index$
Token: index.html$
Token: index.htm$
Token: }$
Token: location$
Token: /manolo$
Token: {$
Token: alias$
Token: jose$
Token: ;$
Token: }$
Token: location$
Token: /pepe/juan$
Token: {$
Token: root$
Token: jeje$
Token: ;$
Token: alias$
Token: /documents/$
Token: ;$
Token: }$
Token: location$
Token: /pepe$
Token: {$
Token: root$
Token: jejeje$
Token: ;$
Token: alias$
Token: manolo$
Token: ;$
Token: }$
Token: }$
Token: }$
Entro en binary insert$
Entro en binary insert$
Resultado de binarySearch: 0$
Guardar elemento en pos: 0$
Entro en binary insert$
Resultado de binarySearch: -2$
Lo a침ade al final o vector est치 vac칤o$
Entro en binary insert$
Resultado de binarySearch: 1$
Guardar elemento en pos: 1$
Entro en binary insert$
Entro en binary insert$
Resultado de binarySearch: -2$
Lo a침ade al final o vector est치 vac칤o$
Entro en binary insert$
Resultado de binarySearch: 0$
Guardar elemento en pos: 0$
Entro en binary insert$
Resultado de binarySearch: -1$
Lo a침ade al principio$
Entro en binary insert$
Resultado de binarySearch: 1$
Guardar elemento en pos: 1$
---------------Imprimir 치rbol de fichero de configuraci칩n---------------$
Context: main$
Hijo 0 de: main$
Context: events$
Key: prueba: Value: 2$
Hijo 1 de: main$
Context: http$
Hijo 0 de: http$
Context: types$
Key: text/css: Value: css$
Key: text/html: Value: html$
Key: text/html: Value: htm$
Key: text/html: Value: shtml$
Key: text/xml: Value: xml$
Hijo 1 de: http$
Context: server$
Key: listen: Value: 127$
Key: server_name: Value: pfuentes.42$
Hijo 0 de: server$
Context: location$
Argumentos del contexto: {/del_prueba}$
Key: root: Value: hola$
Hijo 1 de: server$
Context: location$
Argumentos del contexto: {/prueba}$
Key: root: Value: /documents/$
Hijo 2 de: server$
Context: location$
Argumentos del contexto: {/about.html}$
Key: alias: Value: /documents/tour.html$
Hijo 3 de: server$
Context: location$
Argumentos del contexto: {/}$
Key: alias: Value: /about.html$
Hijo 2 de: http$
Context: server$
Key: error_page: Value: 502$
Key: error_page: Value: 503$
Key: error_page: Value: 504$
Key: error_page: Value: /50x.html$
Key: error_page: Value: 500$
Key: error_page: Value: /50x.html$
Key: listen: Value: 8080$
Key: server_name: Value: serbre$
Hijo 0 de: server$
Context: location$
Argumentos del contexto: {/pepe/juan}$
Key: alias: Value: /documents/$
Key: root: Value: jeje$
Hijo 1 de: server$
Context: location$
Argumentos del contexto: {/pepe}$
Key: alias: Value: manolo$
Key: root: Value: jejeje$
Hijo 2 de: server$
Context: location$
Argumentos del contexto: {/manolo}$
Key: alias: Value: jose$
Hijo 3 de: server$
Context: location$
Argumentos del contexto: {/manuel}$
Key: alias: Value: /documents/$
Hijo 4 de: server$
Context: location$
Argumentos del contexto: {/}$
Key: alias: Value: /documents/$
Key: methods: Value: POST$
Key: postdir: Value: /postfiles/$
Estoy en contexto: main$
Estoy en contexto: events$
Estoy en contexto: http$
Port de server 0 es: 127$
Socket de servidor 0 es: 3$
Port de server 1 es: 8080$
Socket de servidor 1 es: 4$
SOCKET DE ESCUCHA: 4$
Socket de cliente aceptado: 5$
A침adir cliente al vector$
A침adi칩 bien el cliente al vector$
No hay evento a -1 para sobreescribir, escribo en el m치ximo actual$
NEW EVENT | FD: 5 | EVENTS: 1$
No hay evento a -1 para sobreescribir, escribo en el m치ximo actual$
NEW EVENT | FD: 5 | EVENTS: 4$
EVENTO DE LECTURA$
---READ EVENT---$
FD del cliente: 5$
Bytes read: 459$
Buf le칤do: GET /post.html HTTP/1.1^M$
Host: localhost:8080^M$
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:108.0) Gecko/20100101 Firefox/108.0^M$
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8^M$
Accept-Language: en-US,en;q=0.5^M$
Accept-Encoding: gzip, deflate, br^M$
Connection: keep-alive^M$
Upgrade-Insecure-Requests: 1^M$
Sec-Fetch-Dest: document^M$
Sec-Fetch-Mode: navigate^M$
Sec-Fetch-Site: none^M$
Sec-Fetch-User: ?1^M$
^M$
$
Concatear buf$
Size del buf general: 459 , capacity: 463$
Imprimir buf concatenado: $
GET /post.html HTTP/1.1^M$
Host: localhost:8080^M$
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:108.0) Gecko/20100101 Firefox/108.0^M$
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8^M$
Accept-Language: en-US,en;q=0.5^M$
Accept-Encoding: gzip, deflate, br^M$
Connection: keep-alive^M$
Upgrade-Insecure-Requests: 1^M$
Sec-Fetch-Dest: document^M$
Sec-Fetch-Mode: navigate^M$
Sec-Fetch-Site: none^M$
Sec-Fetch-User: ?1^M$
^M$
$
Longitud de buffer concantenado: 459$
Leer header$
Lim es: 455$
Size es: 459$
Ley칩 todo el header$
Solo ley칩 el header, no hay body$
~~~~LOAD REQUEST STAGE~~~~$
Cre칩 el istringstream$
$
METHOD: GET$
$
URL: /post.html$
-------------------IMPRIMO MAPA-------------------$
$
$
Key: Accept | Value: text/html,application/xhtml+xml,application/xml$
Key: Accept | Value: q=0.9,image/avif,image/webp,*/*$
Key: Accept | Value: q=0.8^M$
Key: Accept-Encoding | Value: gzip, deflate, br^M$
Key: Accept-Language | Value: en-US,en$
Key: Accept-Language | Value: q=0.5^M$
Key: Connection | Value: keep-alive^M$
Key: Host | Value: localhost:8080^M$
Key: Sec-Fetch-Dest | Value: document^M$
Key: Sec-Fetch-Mode | Value: navigate^M$
Key: Sec-Fetch-Site | Value: none^M$
Key: Sec-Fetch-User | Value: ?1^M$
Key: Upgrade-Insecure-Requests | Value: 1^M$
Key: User-Agent | Value: Mozilla/5.0 (Macintosh$
Key: User-Agent | Value: Intel Mac OS X 10.15$
Key: User-Agent | Value: rv:108.0) Gecko/20100101 Firefox/108.0^M$
$
$
-------------------TERMINA DE IMPRIMIR MAPA-------------------$
$
$
Pasa a estado 1$
Tiene que leer el body$
No hay content-length$
Pasa a estado 2$
leaks Report Version: 4.0$
Process 68595: 279 nodes malloced for 34 KB$
Process 68595: 0 leaks for 0 total leaked bytes.$
$
Estado de cliente tras leer: 2$
EVENTO DE ESCRITURA$
---WRITE EVENT---$
EN RESPONSE TO METHOD$
M츐-^ITODO A EVALUAR: GET$
hola$
GET METHOD$
URL: /post.html$
URL a comparar: /post.html$
Estoy en contexto location: /pepe/juan$
Len de location: 10$
SUBDIRS1$
$
pepe$
juan$
SUBDIRS2$
$
post.html$
Estoy en contexto location: /pepe$
Len de location: 5$
SUBDIRS1$
$
pepe$
SUBDIRS2$
$
post.html$
Estoy en contexto location: /manolo$
Len de location: 7$
SUBDIRS1$
$
manolo$
SUBDIRS2$
$
post.html$
Estoy en contexto location: /manuel$
Len de location: 7$
SUBDIRS1$
$
manuel$
SUBDIRS2$
$
post.html$
Estoy en contexto location: /$
Len de location: 1$
SUBDIRS1$
$
SUBDIRS2$
$
post.html$
Hace match de la URL: / y /post.html$
Location es: /$
URL es: /post.html$
Key tipo: alias$
Encontr칩 la key$
Key tipo encontrada: alias$
URL sin la key, el resto: post.html$
Es alias: $
filePath: /Users/pfuentes/ejercicios/CPP/webserv_git/documents/post.html$
$
FILEPATH IS:/Users/pfuentes/ejercicios/CPP/webserv_git/documents/post.html$
filePath: /Users/pfuentes/ejercicios/CPP/webserv_git/documents/post.html$
$
RESPONSE HEADER IS: HTTP/1.1 200 OK^M$
Connection: close^M$
^M$
$
Lee bien el fichero para enviar la respuesta$
SOCKET DE ESCUCHA: 4$
Socket de cliente aceptado: 5$
A침adir cliente al vector$
A침adi칩 bien el cliente al vector$
Hay evento a -1 para sobreescribirNEW EVENT | FD: 5 | EVENTS: 1$
No hay evento a -1 para sobreescribir, escribo en el m치ximo actual$
NEW EVENT | FD: 5 | EVENTS: 4$
EVENTO DE LECTURA$
---READ EVENT---$
FD del cliente: 5$
Bytes read: 918$
Buf le칤do: POST /post.html HTTP/1.1^M$
Host: localhost:8080^M$
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:108.0) Gecko/20100101 Firefox/108.0^M$
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8^M$
Accept-Language: en-US,en;q=0.5^M$
Accept-Encoding: gzip, deflate, br^M$
Content-Type: multipart/form-data; boundary=---------------------------296710228310983753883304154394^M$
Content-Length: 254^M$
Origin: http://localhost:8080^M$
Connection: keep-alive^M$
Referer: http://localhost:8080/post.html^M$
Upgrade-Insecure-Requests: 1^M$
Sec-Fetch-Dest: document^M$
Sec-Fetch-Mode: navigate^M$
Sec-Fetch-Site: same-origin^M$
Sec-Fetch-User: ?1^M$
^M$
-----------------------------296710228310983753883304154394^M$
Content-Disposition: form-data; name="file_name"; filename="hola.txt"^M$
Content-Type: text/plain^M$
^M$
gegegba$
cseeg$
aaaaaa$
eerere$
$
^M$
-----------------------------296710228310983753883304154394--^M$
$
Concatear buf$
Size del buf general: 918 , capacity: 927$
Imprimir buf concatenado: $
POST /post.html HTTP/1.1^M$
Host: localhost:8080^M$
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:108.0) Gecko/20100101 Firefox/108.0^M$
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8^M$
Accept-Language: en-US,en;q=0.5^M$
Accept-Encoding: gzip, deflate, br^M$
Content-Type: multipart/form-data; boundary=---------------------------296710228310983753883304154394^M$
Content-Length: 254^M$
Origin: http://localhost:8080^M$
Connection: keep-alive^M$
Referer: http://localhost:8080/post.html^M$
Upgrade-Insecure-Requests: 1^M$
Sec-Fetch-Dest: document^M$
Sec-Fetch-Mode: navigate^M$
Sec-Fetch-Site: same-origin^M$
Sec-Fetch-User: ?1^M$
^M$
-----------------------------296710228310983753883304154394^M$
Content-Disposition: form-data; name="file_name"; filename="hola.txt"^M$
Content-Type: text/plain^M$
^M$
gegegba$
cseeg$
aaaaaa$
eerere$
$
^M$
-----------------------------296710228310983753883304154394--^M$
$
Longitud de buffer concantenado: 918$
Leer header$
Lim es: 660$
Size es: 918$
Ley칩 todo el header$
Hay que guardar el resto$
Guard칩 bien el header$
Header: POST /post.html HTTP/1.1^M$
Host: localhost:8080^M$
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:108.0) Gecko/20100101 Firefox/108.0^M$
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8^M$
Accept-Language: en-US,en;q=0.5^M$
Accept-Encoding: gzip, deflate, br^M$
Content-Type: multipart/form-data; boundary=---------------------------296710228310983753883304154394^M$
Content-Length: 254^M$
Origin: http://localhost:8080^M$
Connection: keep-alive^M$
Referer: http://localhost:8080/post.html^M$
Upgrade-Insecure-Requests: 1^M$
Sec-Fetch-Dest: document^M$
Sec-Fetch-Mode: navigate^M$
Sec-Fetch-Site: same-origin^M$
Sec-Fetch-User: ?1$
Bodylen: 254$
Donde tiene que empezar: 664$
$
Guard칩 bien el resto$
Resto: $
-----------------------------296710228310983753883304154394^M$
Content-Disposition: form-data; name="file_name"; filename="hola.txt"^M$
Content-Type: text/plain^M$
^M$
gegegba$
cseeg$
aaaaaa$
eerere$
$
^M$
-----------------------------296710228310983753883304154394--^M$
$
---------------BUF TRAS REASIGNARLO---------------$
-----------------------------296710228310983753883304154394^M$
Content-Disposition: form-data; name="file_name"; filename="hola.txt"^M$
Content-Type: text/plain^M$
^M$
gegegba$
cseeg$
aaaaaa$
eerere$
$
^M$
-----------------------------296710228310983753883304154394--^M$
$
~~~~LOAD REQUEST STAGE~~~~$
Cre칩 el istringstream$
$
METHOD: POST$
$
URL: /post.ht